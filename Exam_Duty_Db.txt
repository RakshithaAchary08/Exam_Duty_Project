CREATE TABLE registrations (
  id INT AUTO_INCREMENT PRIMARY KEY,
  first_name VARCHAR(100),
  last_name VARCHAR(100),
  aadhaar VARCHAR(12),
  email VARCHAR(100),
  contact1 VARCHAR(10),
  contact2 VARCHAR(10),
  photo_path VARCHAR(255),
  aadhaar_path VARCHAR(255),
  pan_path VARCHAR(255),
  registration_date DATETIME
);


CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  first_name VARCHAR(50),
  last_name VARCHAR(50),
  dob DATE,
  email VARCHAR(100),
  contact1 VARCHAR(15),
  contact2 VARCHAR(15),
  state VARCHAR(50),
  district VARCHAR(50),
  bank_name VARCHAR(100),
  account_number VARCHAR(30),
  ifsc VARCHAR(20),
  aadhaar_number VARCHAR(20),
  pan_number VARCHAR(20),
  aadhaar_base64 LONGTEXT,
  photo_base64 LONGTEXT,
  pan_photo_base64 LONGTEXT
);


ALTER TABLE users 
ADD COLUMN status ENUM('pending', 'accepted', 'rejected') DEFAULT 'pending',
MODIFY COLUMN is_paid TINYINT(1) DEFAULT 0;


conn = new mysqli("localhost", "root", "Rak@2006", "duty_portal", 3307);
//$conn = new mysqli("localhost", "shruthac", "VSE(8r[9kjNm29", "shruthac_duty_portal", 3306);


CREATE TABLE duty_assignments (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    duty_date DATE NOT NULL,
    location VARCHAR(255) NOT NULL,
    arrival_time TIME NOT NULL,
    csr_image VARCHAR(255), -- path to image file
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
);


DROP TABLE IF EXISTS registered_users;
CREATE TABLE registered_users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    dob DATE NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    contact1 VARCHAR(20) NOT NULL,
    contact2 VARCHAR(20),
    state VARCHAR(100),
    district VARCHAR(100),
    bank_name VARCHAR(255) NOT NULL,
    account_number VARCHAR(50) NOT NULL,
    ifsc VARCHAR(20) NOT NULL,
    aadhaar_number VARCHAR(20) NOT NULL UNIQUE,
    pan_number VARCHAR(20) NOT NULL UNIQUE,
    aadhaar_base64 LONGTEXT NOT NULL,
    photo_base64 LONGTEXT NOT NULL,
    pan_photo_base64 LONGTEXT NOT NULL,
    exam_id INT, -- This could be a foreign key to exams.id if you establish a relationship
    role VARCHAR(100) NOT NULL,
    exam_name VARCHAR(255),
    center_code_reg VARCHAR(50),
    center_name_reg VARCHAR(255),
    exam_date_reg DATE,
    exam_shift VARCHAR(100),
    registered_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


DROP TABLE IF EXISTS registered_users;
CREATE TABLE registered_users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    dob DATE NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    contact1 VARCHAR(20) NOT NULL,
    contact2 VARCHAR(20),
    state VARCHAR(100),
    district VARCHAR(100),
    bank_name VARCHAR(255) NOT NULL,
    account_number VARCHAR(50) NOT NULL,
    ifsc VARCHAR(20) NOT NULL,
    aadhaar_number VARCHAR(20) NOT NULL UNIQUE,
    pan_number VARCHAR(20) NOT NULL UNIQUE,
    aadhaar_base64 LONGTEXT NOT NULL,
    photo_base64 LONGTEXT NOT NULL,
    pan_photo_base64 LONGTEXT NOT NULL,
    exam_id INT, -- This could be a foreign key to exams.id if you establish a relationship
    role VARCHAR(100) NOT NULL,
    exam_name VARCHAR(255),
    center_code_reg VARCHAR(50),
    center_name_reg VARCHAR(255),
    exam_date_reg DATE,
    exam_shift VARCHAR(100),
    registered_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; -- Changed collation here


CREATE TABLE registered_users (
  id int(11) NOT NULL AUTO_INCREMENT,
  first_name varchar(100) NOT NULL,
  last_name varchar(100) DEFAULT NULL,
  dob date DEFAULT NULL,
  email varchar(100) NOT NULL,
  contact1 varchar(20) NOT NULL,
  contact2 varchar(20) DEFAULT NULL,
  state varchar(50) DEFAULT NULL,
  district varchar(50) DEFAULT NULL,
  bank_name varchar(100) DEFAULT NULL,
  account_number varchar(50) DEFAULT NULL,
  ifsc varchar(20) DEFAULT NULL,
  aadhaar_number varchar(20) DEFAULT NULL,
  pan_number varchar(20) DEFAULT NULL,
  aadhaar_base64 longtext DEFAULT NULL,
  photo_base64 longtext DEFAULT NULL,
  pan_photo_base64 longtext DEFAULT NULL,
  registration_date datetime DEFAULT CURRENT_TIMESTAMP,
  last_updated datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  UNIQUE KEY email (email)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;


CREATE TABLE IF NOT EXISTS registrations (
    id INT AUTO_INCREMENT PRIMARY KEY,
    exam_id VARCHAR(255) NOT NULL,        -- Stores the center_code from the exam details
    user_name VARCHAR(255) NOT NULL,      -- Stores the 'Full Name' entered in the form
    phone_number VARCHAR(20) NOT NULL,    -- Stores the 'Phone Number' entered in the form
    role VARCHAR(100) NOT NULL,           -- Stores the selected duty role (Frisking, Invigilation, etc.)
    registration_date DATETIME NOT NULL,  -- Timestamp of when the registration was submitted
    center_code VARCHAR(255) NOT NULL,    -- Center Code from exam details
    center_name VARCHAR(255) NOT NULL,    -- Center Name from exam details
    exam_date DATE NOT NULL,              -- Exam Date from exam details
    exam_shift VARCHAR(100) NOT NULL,     -- Exam Shift from exam details
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- Auto-generated timestamp for record creation
);

CREATE TABLE registered_users (
  id int(11) NOT NULL AUTO_INCREMENT,
  first_name varchar(100) NOT NULL,
  last_name varchar(100) NOT NULL,
  dob date NOT NULL,
  email varchar(255) NOT NULL,
  contact1 varchar(15) NOT NULL,
  contact2 varchar(15) DEFAULT NULL,
  state varchar(100) NOT NULL,
  district varchar(100) NOT NULL,
  bank_name varchar(255) NOT NULL,
  account_number varchar(20) NOT NULL,
  ifsc varchar(11) NOT NULL,
  aadhaar_number varchar(12) NOT NULL,
  pan_number varchar(10) NOT NULL,
  aadhaar_base64 longtext NOT NULL,
  photo_base64 longtext NOT NULL,
  pan_photo_base64 longtext NOT NULL,
  exam_id varchar(50) DEFAULT NULL,
  registration_date timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (id),
  UNIQUE KEY email (email),
  UNIQUE KEY aadhaar_number (aadhaar_number),
  UNIQUE KEY pan_number (pan_number)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;


CREATE TABLE registered_users (
  id int(11) NOT NULL AUTO_INCREMENT,
  first_name varchar(100) NOT NULL,
  last_name varchar(100) NOT NULL,
  dob date NOT NULL,
  email varchar(100) NOT NULL,
  contact1 varchar(15) NOT NULL,
  contact2 varchar(15) DEFAULT NULL,
  state varchar(50) NOT NULL,
  district varchar(50) NOT NULL,
  bank_name varchar(100) NOT NULL,
  account_number varchar(20) NOT NULL,
  ifsc varchar(11) NOT NULL,
  aadhaar_number varchar(12) NOT NULL,
  pan_number varchar(10) NOT NULL,
  photo_base64 longtext DEFAULT NULL,
  aadhaar_base64 longtext DEFAULT NULL,
  pan_photo_base64 longtext DEFAULT NULL,
  exam_id varchar(50) DEFAULT NULL,
  registration_date datetime NOT NULL DEFAULT current_timestamp(),
  last_updated datetime DEFAULT NULL ON UPDATE current_timestamp(),
  PRIMARY KEY (id),
  UNIQUE KEY email (email),
  UNIQUE KEY aadhaar_number (aadhaar_number),
  UNIQUE KEY pan_number (pan_number)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;


CREATE TABLE registered_users (
  id int(11) NOT NULL AUTO_INCREMENT,
  first_name varchar(100) NOT NULL,
  last_name varchar(100) NOT NULL,
  dob date NOT NULL,
  email varchar(100) NOT NULL,
  contact1 varchar(15) NOT NULL,
  contact2 varchar(15) DEFAULT NULL,
  state varchar(50) NOT NULL,
  district varchar(50) NOT NULL,
  bank_name varchar(100) NOT NULL,
  account_number varchar(20) NOT NULL,
  ifsc varchar(20) NOT NULL,
  aadhaar_number varchar(12) NOT NULL,
  pan_number varchar(10) NOT NULL,
  photo_base64 longtext DEFAULT NULL,
  aadhaar_base64 longtext DEFAULT NULL,
  pan_photo_base64 longtext DEFAULT NULL,
  exam_id varchar(50) DEFAULT NULL,
  registration_date datetime NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (id),
  UNIQUE KEY email (email),
  UNIQUE KEY aadhaar_number (aadhaar_number),
  UNIQUE KEY pan_number (pan_number)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;